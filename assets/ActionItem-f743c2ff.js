import{I as U,r as k,q as $,a as n,o as u,c as w,b as t,w as a,F as V,e as z,f as y,d as b,x as I,z as g,J as A}from"./index-723f8be6.js";const M={__name:"ActionItem",props:["action"],setup(o){const f=o,N=U().params.testId,s=k(!1),c=k([]),h=[{value:"previous",label:"Назад"},{value:"next",label:"Далее"},{value:"moveToStep",label:"Переход к блоку"},{value:"closeModalWarning",label:"Закрыть модальное окно"},{value:"startAgain",label:"Начать заново"},{value:"closeSession",label:"Закрыть сессию"}],p=async()=>{const d=await A.getBlocks(N);c.value=d.data.data.map(e=>({seqNo:e.seq_no,internalId:e.internal_id,name:e.body.name})),c.value.sort((e,r)=>e.seqNo-r.seqNo)},q=async()=>{s.value=!0,console.log(f.action.internalId),await p()},x=(d,e)=>{f.action.internalId=e.internalId,s.value=!1};return $(()=>{p()}),(d,e)=>{const r=n("el-option"),B=n("el-select"),C=n("el-switch"),m=n("el-form-item"),S=n("el-col"),v=n("el-button"),i=n("el-table-column"),T=n("el-table"),L=n("el-dialog");return u(),w(V,null,[t(S,{span:8,offset:1},{default:a(()=>[t(m,{label:"Действие:"},{default:a(()=>[t(B,{class:"m-2",modelValue:o.action.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.action.name=l),placeholder:"Select"},{default:a(()=>[(u(),w(V,null,z(h,l=>t(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(m,{label:"Проверка вопроса:"},{default:a(()=>[t(C,{modelValue:o.action.checkQuestion,"onUpdate:modelValue":e[1]||(e[1]=l=>o.action.checkQuestion=l),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.action.name==="moveToStep"?(u(),y(v,{key:0,onClick:e[2]||(e[2]=l=>q())},{default:a(()=>[b("Выбрать блок")]),_:1})):I("",!0),t(L,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),title:"Выберите блок"},{default:a(()=>[t(T,{data:c.value},{default:a(()=>[t(i,{property:"seqNo",label:"Порядковый номер",width:"110"}),t(i,{property:"internalId",label:"Внутренний id",width:"120"}),t(i,{property:"name",label:"Наименование блока",width:"300"}),t(i,{property:"name",label:"Выбор",width:"100"},{default:a(l=>[t(v,{size:"small",onClick:_=>x(l.$index,l.row)},{default:a(()=>[b("Выбрать")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),o.action.name==="moveToStep"?(u(),y(m,{key:1,label:"Внутренний id:"},{default:a(()=>{var l;return[b(g(o.action.internalId)+" Блок: "+g((l=c.value.find(_=>_.internalId===o.action.internalId))==null?void 0:l.name),1)]}),_:1})):I("",!0)],64)}}};export{M as default};
